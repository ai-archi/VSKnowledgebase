id: detailed-task-template
name: 详细任务模板
description: 详细流程：起草提案 → 审查对齐 → 实现任务 → 测试验证 → 归档更新
category: task
workflow:
  steps:
    - key: draft-proposal
      label: 起草提案
      description: AI 将询问关键问题以明确需求
      order: 1
      fields:
        - key: questions
          type: array
          label: 问题列表
          items:
            type: object
            properties:
              - key: text
                type: string
                label: 问题
              - key: answer
                type: string
                label: 回答
        - key: proposal
          type: textarea
          label: 生成的提案
          readonly: true
    - key: review-alignment
      label: 审查对齐
      description: 人和 AI 共同审查，展示提案并收集反馈，反复迭代
      order: 2
      fields:
        - key: proposal
          type: textarea
          label: 提案内容
          readonly: true
        - key: feedback
          type: textarea
          label: 反馈意见
    - key: implementation
      label: 实现任务
      description: 根据批准的规范生成代码
      order: 3
      fields:
        - key: specification
          type: textarea
          label: 规范内容
          readonly: true
        - key: codeFiles
          type: array
          label: 生成的代码文件
          items:
            type: string
    - key: test-verification
      label: 测试验证
      description: 验证代码的正确性和完整性
      order: 4
      fields:
        - key: testCases
          type: array
          label: 测试用例
          items:
            type: object
            properties:
              - key: name
                type: string
                label: 测试用例名称
              - key: status
                type: string
                label: 状态
                enum: [pending, passed, failed]
        - key: testResults
          type: textarea
          label: 测试结果
    - key: archive-update
      label: 归档更新
      description: 变更归档，规范文档自动更新
      order: 5
      fields:
        - key: updatedDocuments
          type: array
          label: 已更新的文档
          items:
            type: string
  initialStep: draft-proposal
createdAt: 2024-01-01T00:00:00Z
updatedAt: 2024-01-01T00:00:00Z

