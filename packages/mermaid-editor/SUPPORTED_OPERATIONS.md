# Mermaid ç¼–è¾‘å™¨æ”¯æŒçš„æ“ä½œæ¸…å•

## ğŸ“‹ æ¦‚è¿°

å½“å‰ Mermaid Editor V2 åŸºäº mermaid.js å®˜æ–¹åº“ï¼Œæ”¯æŒä»¥ä¸‹æ“ä½œï¼š

---

## ğŸ¨ 1. å¯è§†åŒ–æ“ä½œ

### 1.1 é€‰æ‹©æ“ä½œ
- âœ… **å•é€‰èŠ‚ç‚¹**ï¼šç‚¹å‡»èŠ‚ç‚¹è¿›è¡Œé€‰æ‹©
- âœ… **å•é€‰è¾¹**ï¼šç‚¹å‡»è¾¹è¿›è¡Œé€‰æ‹©
- âœ… **å¤šé€‰èŠ‚ç‚¹**ï¼šShift + ç‚¹å‡»èŠ‚ç‚¹ï¼Œæˆ– Ctrl/Cmd + Shift + ç‚¹å‡»
- âœ… **å¤šé€‰è¾¹**ï¼šShift + ç‚¹å‡»è¾¹ï¼Œæˆ– Ctrl/Cmd + Shift + ç‚¹å‡»
- âœ… **å–æ¶ˆé€‰æ‹©**ï¼šç‚¹å‡»ç©ºç™½å¤„
- âœ… **é€‰æ‹©æ¡†æ˜¾ç¤º**ï¼šé€‰ä¸­å…ƒç´ åæ˜¾ç¤ºè“è‰²è™šçº¿é€‰æ‹©æ¡†
- âœ… **é«˜äº®æ˜¾ç¤º**ï¼šé€‰ä¸­çš„èŠ‚ç‚¹/è¾¹ä¼šé«˜äº®æ˜¾ç¤º

### 1.2 æŸ¥çœ‹æ“ä½œ
- âœ… **å®æ—¶æ¸²æŸ“**ï¼šä¿®æ”¹ä»£ç åè‡ªåŠ¨æ¸²æŸ“å›¾è¡¨
- âœ… **é”™è¯¯æç¤º**ï¼šæ¸²æŸ“é”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- âœ… **çŠ¶æ€æ˜¾ç¤º**ï¼šæ˜¾ç¤ºå½“å‰é€‰æ‹©çŠ¶æ€å’ŒåŒæ­¥çŠ¶æ€

---

## âœï¸ 2. ç¼–è¾‘æ“ä½œ

### 2.1 æ ‡ç­¾ç¼–è¾‘
- âœ… **ç¼–è¾‘èŠ‚ç‚¹æ ‡ç­¾**ï¼šåŒå‡»èŠ‚ç‚¹æ ‡ç­¾è¿›è¡Œå†…è”ç¼–è¾‘
- âœ… **ç¼–è¾‘è¾¹æ ‡ç­¾**ï¼šåŒå‡»è¾¹æ ‡ç­¾è¿›è¡Œå†…è”ç¼–è¾‘ï¼ˆå¦‚æœæ²¡æœ‰æ ‡ç­¾åˆ™åˆ›å»ºï¼‰
- âœ… **ä¿å­˜ç¼–è¾‘**ï¼šEnter é”®ä¿å­˜
- âœ… **å–æ¶ˆç¼–è¾‘**ï¼šEscape é”®å–æ¶ˆ

### 2.2 èŠ‚ç‚¹æ“ä½œ
- âœ… **æ·»åŠ èŠ‚ç‚¹**ï¼šåŒå‡»ç©ºç™½å¤„ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©å½¢çŠ¶å¹¶è¾“å…¥æ ‡ç­¾
  - æ”¯æŒçš„èŠ‚ç‚¹å½¢çŠ¶ï¼š
    - çŸ©å½¢ (rectangle) - `[Label]`
    - åœ†è§’çŸ©å½¢ (stadium) - `(Label)`
    - è±å½¢ (diamond) - `{Label}`
    - åœ†å½¢ (circle) - `((Label))`
    - å­ç¨‹åº (subroutine) - `[[Label]]`
    - åœ†æŸ± (cylinder) - `[/Label/]`
    - å…­è¾¹å½¢ (hexagon) - `{{Label}}`
    - å¹³è¡Œå››è¾¹å½¢ (parallelogram) - `[/Label\]`
- âœ… **åˆ é™¤èŠ‚ç‚¹**ï¼šé€‰ä¸­èŠ‚ç‚¹åç‚¹å‡»"åˆ é™¤é€‰ä¸­"æŒ‰é’®
- âœ… **æ‰¹é‡åˆ é™¤èŠ‚ç‚¹**ï¼šå¤šé€‰èŠ‚ç‚¹åæ‰¹é‡åˆ é™¤ï¼ˆè‡ªåŠ¨æ¸…ç†ç›¸å…³è¾¹å’Œæ ·å¼ï¼‰

### 2.3 è¾¹æ“ä½œ
- âœ… **æ·»åŠ è¾¹**ï¼šCtrl/Cmd + ç‚¹å‡»æºèŠ‚ç‚¹ï¼Œæ‹–æ‹½åˆ°ç›®æ ‡èŠ‚ç‚¹
  - å®æ—¶æ˜¾ç¤ºè¿æ¥çº¿é¢„è§ˆ
  - æ‚¬åœç›®æ ‡èŠ‚ç‚¹æ—¶é«˜äº®æ˜¾ç¤º
  - è‡ªåŠ¨é¿å…é‡å¤è¿æ¥
- âœ… **åˆ é™¤è¾¹**ï¼šé€‰ä¸­è¾¹åç‚¹å‡»"åˆ é™¤é€‰ä¸­"æŒ‰é’®
- âœ… **æ‰¹é‡åˆ é™¤è¾¹**ï¼šå¤šé€‰è¾¹åæ‰¹é‡åˆ é™¤

### 2.4 ç»“æ„æ“ä½œ
- âœ… **è‡ªåŠ¨å¸ƒå±€**ï¼šä½¿ç”¨ mermaid.js çš„ dagre å¸ƒå±€ç®—æ³•
- âœ… **æ–¹å‘è®¾ç½®**ï¼šæ”¯æŒ TDï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰ã€LRï¼ˆä»å·¦åˆ°å³ï¼‰ã€BTï¼ˆä»ä¸‹åˆ°ä¸Šï¼‰ã€RLï¼ˆä»å³åˆ°å·¦ï¼‰
- âœ… **å­å›¾æ”¯æŒ**ï¼šè§£æå’Œæ˜¾ç¤ºå­å›¾ï¼ˆsubgraphï¼‰

---

## ğŸ¨ 3. æ ·å¼æ“ä½œ

### 3.1 èŠ‚ç‚¹æ ·å¼
- âœ… **å¡«å……é¢œè‰²** (fill)ï¼šè®¾ç½®èŠ‚ç‚¹èƒŒæ™¯é¢œè‰²
- âœ… **æè¾¹é¢œè‰²** (stroke)ï¼šè®¾ç½®èŠ‚ç‚¹è¾¹æ¡†é¢œè‰²
- âœ… **æ–‡æœ¬é¢œè‰²** (color)ï¼šè®¾ç½®èŠ‚ç‚¹æ–‡æœ¬é¢œè‰²
- âœ… **æè¾¹å®½åº¦** (stroke-width)ï¼šè®¾ç½®èŠ‚ç‚¹è¾¹æ¡†å®½åº¦
- âœ… **æ ·å¼é‡ç½®**ï¼šé‡ç½®èŠ‚ç‚¹æ ·å¼ä¸ºé»˜è®¤å€¼

### 3.2 è¾¹æ ·å¼
- âœ… **é¢œè‰²** (stroke)ï¼šè®¾ç½®è¾¹çš„é¢œè‰²
- âœ… **å®½åº¦** (stroke-width)ï¼šè®¾ç½®è¾¹çš„å®½åº¦
- âœ… **çº¿æ¡æ ·å¼** (stroke-dasharray)ï¼š
  - å®çº¿ (solid)
  - è™šçº¿ (dashed)
  - ç‚¹çº¿ (dotted)
- âœ… **æ ·å¼é‡ç½®**ï¼šé‡ç½®è¾¹æ ·å¼ä¸ºé»˜è®¤å€¼

### 3.3 æ ·å¼åº”ç”¨æ–¹å¼
- âœ… **classDef**ï¼šé€šè¿‡ `classDef` å®šä¹‰æ ·å¼ç±»
- âœ… **class åº”ç”¨**ï¼šé€šè¿‡ `class` å‘½ä»¤åº”ç”¨æ ·å¼åˆ°èŠ‚ç‚¹
- âœ… **linkStyle**ï¼šé€šè¿‡ `linkStyle` åº”ç”¨æ ·å¼åˆ°è¾¹

---

## ğŸ“ 4. ä»£ç ç¼–è¾‘æ“ä½œ

### 4.1 ä»£ç ç¼–è¾‘å™¨
- âœ… **è¯­æ³•é«˜äº®**ï¼šMermaid è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼ˆä½¿ç”¨ CodeMirrorï¼‰
- âœ… **è‡ªåŠ¨è¡¥å…¨**ï¼šCtrl+Space è§¦å‘è‡ªåŠ¨è¡¥å…¨
- âœ… **è¡Œå·æ˜¾ç¤º**ï¼šæ˜¾ç¤ºä»£ç è¡Œå·
- âœ… **å®æ—¶é¢„è§ˆ**ï¼šä¿®æ”¹ä»£ç åè‡ªåŠ¨æ¸²æŸ“ï¼ˆ500ms é˜²æŠ–ï¼‰
- âœ… **é™çº§æ–¹æ¡ˆ**ï¼šå¦‚æœ CodeMirror ä¸å¯ç”¨ï¼Œä½¿ç”¨åŸç”Ÿ textarea

### 4.2 ä»£ç åŒæ­¥
- âœ… **åŒå‘åŒæ­¥**ï¼šå¯è§†åŒ–ç¼–è¾‘å’Œä»£ç ç¼–è¾‘å®æ—¶åŒæ­¥
- âœ… **æ ¼å¼ä¿ç•™**ï¼šå°½é‡ä¿ç•™åŸå§‹ä»£ç æ ¼å¼å’Œæ³¨é‡Š
- âœ… **è‡ªåŠ¨ä¿å­˜**ï¼šä¿®æ”¹åè‡ªåŠ¨ä¿å­˜åˆ°æ–‡ä»¶

---

## ğŸ” 5. è§£æå’Œç”Ÿæˆæ“ä½œ

### 5.1 æ”¯æŒçš„å›¾è¡¨ç±»å‹
- âœ… **æµç¨‹å›¾** (flowchart/graph)ï¼šTD, LR, BT, RL æ–¹å‘
- âœ… **åºåˆ—å›¾** (sequenceDiagram)ï¼šè§£ææ”¯æŒ
- âœ… **ç±»å›¾** (classDiagram)ï¼šè§£ææ”¯æŒ
- âœ… **çŠ¶æ€å›¾** (stateDiagram)ï¼šè§£ææ”¯æŒ
- âœ… **ç”˜ç‰¹å›¾** (gantt)ï¼šè§£ææ”¯æŒ
- âœ… **é¥¼å›¾** (pie)ï¼šè§£ææ”¯æŒ
- âœ… **å…¶ä»–ç±»å‹**ï¼šé€šè¿‡ mermaid.js æ”¯æŒ

### 5.2 èŠ‚ç‚¹è¯­æ³•æ”¯æŒ
- âœ… `A[Label]` - çŸ©å½¢
- âœ… `A(Label)` - åœ†è§’çŸ©å½¢
- âœ… `A{Label}` - è±å½¢
- âœ… `A((Label))` - åœ†å½¢
- âœ… `A[[Label]]` - å­ç¨‹åº
- âœ… `A[/Label/]` - åœ†æŸ±
- âœ… `A{{Label}}` - å…­è¾¹å½¢
- âœ… `A[/Label\]` - å¹³è¡Œå››è¾¹å½¢

### 5.3 è¾¹è¯­æ³•æ”¯æŒ
- âœ… `A --> B` - ç®­å¤´
- âœ… `A --- B` - ç›´çº¿
- âœ… `A -.-> B` - è™šçº¿ç®­å¤´
- âœ… `A -.- B` - è™šçº¿
- âœ… `A ==> B` - ç²—ç®­å¤´
- âœ… `A === B` - ç²—çº¿
- âœ… `A -->|Label| B` - å¸¦æ ‡ç­¾çš„è¾¹

### 5.4 æ ·å¼è¯­æ³•æ”¯æŒ
- âœ… `classDef className fill:#f9f,stroke:#333,stroke-width:2px`
- âœ… `class nodeId className`
- âœ… `linkStyle 0 stroke:#f66,stroke-width:2px`

---

## ğŸš« 6. ä¸æ”¯æŒçš„æ“ä½œ

### 6.1 æ‹–æ‹½æ“ä½œ
- âŒ **èŠ‚ç‚¹æ‹–æ‹½**ï¼šä¸æ”¯æŒæ‰‹åŠ¨æ‹–æ‹½èŠ‚ç‚¹ä½ç½®ï¼ˆmermaid.js ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€ï¼‰
- âŒ **è¾¹æ‹–æ‹½**ï¼šä¸æ”¯æŒæ‰‹åŠ¨è°ƒæ•´è¾¹çš„è·¯å¾„

### 6.2 é«˜çº§ç¼–è¾‘
- âŒ **æ’¤é”€/é‡åš**ï¼šæš‚ä¸æ”¯æŒæ“ä½œå†å²
- âŒ **å¤åˆ¶/ç²˜è´´**ï¼šæš‚ä¸æ”¯æŒèŠ‚ç‚¹/è¾¹çš„å¤åˆ¶ç²˜è´´
- âŒ **æ‰¹é‡æ ·å¼åº”ç”¨**ï¼šæš‚ä¸æ”¯æŒæ‰¹é‡åº”ç”¨æ ·å¼åˆ°å¤šä¸ªèŠ‚ç‚¹

### 6.3 å¯¼å‡ºåŠŸèƒ½
- âŒ **å¯¼å‡ºä¸ºå›¾ç‰‡**ï¼šæš‚ä¸æ”¯æŒå¯¼å‡ºä¸º PNG/SVG
- âŒ **å¯¼å‡ºä¸ºå…¶ä»–æ ¼å¼**ï¼šæš‚ä¸æ”¯æŒå…¶ä»–æ ¼å¼å¯¼å‡º

---

## ğŸ“Š 7. æ“ä½œç»Ÿè®¡

### å·²å®ç°æ“ä½œ
- **å¯è§†åŒ–æ“ä½œ**ï¼š7 é¡¹ âœ…
- **ç¼–è¾‘æ“ä½œ**ï¼š12 é¡¹ âœ…
- **æ ·å¼æ“ä½œ**ï¼š8 é¡¹ âœ…
- **ä»£ç ç¼–è¾‘æ“ä½œ**ï¼š6 é¡¹ âœ…
- **è§£æå’Œç”Ÿæˆæ“ä½œ**ï¼š15+ é¡¹ âœ…

### æ€»è®¡
- **å·²å®ç°**ï¼š48+ é¡¹æ“ä½œ âœ…
- **æœªå®ç°**ï¼š6 é¡¹æ“ä½œ âŒ

---

## ğŸ¯ 8. ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šåˆ›å»ºç®€å•æµç¨‹å›¾
1. åŒå‡»ç©ºç™½å¤„æ·»åŠ èŠ‚ç‚¹ Aï¼ˆçŸ©å½¢ï¼‰
2. åŒå‡»ç©ºç™½å¤„æ·»åŠ èŠ‚ç‚¹ Bï¼ˆåœ†è§’çŸ©å½¢ï¼‰
3. Ctrl/Cmd + ç‚¹å‡» Aï¼Œæ‹–æ‹½åˆ° B åˆ›å»ºè¿æ¥
4. åŒå‡»èŠ‚ç‚¹æ ‡ç­¾ç¼–è¾‘æ–‡æœ¬

### ç¤ºä¾‹ 2ï¼šä¿®æ”¹æ ·å¼
1. ç‚¹å‡»èŠ‚ç‚¹ A
2. åœ¨å³ä¾§æ ·å¼é¢æ¿ä¿®æ”¹å¡«å……é¢œè‰²ä¸º `#f9f`
3. ä¿®æ”¹æè¾¹é¢œè‰²ä¸º `#333`
4. ç‚¹å‡»"é‡ç½®"æ¢å¤é»˜è®¤æ ·å¼

### ç¤ºä¾‹ 3ï¼šå¤šé€‰æ“ä½œ
1. Shift + ç‚¹å‡»èŠ‚ç‚¹ A
2. Shift + ç‚¹å‡»èŠ‚ç‚¹ B
3. ç‚¹å‡»"åˆ é™¤é€‰ä¸­"æ‰¹é‡åˆ é™¤

### ç¤ºä¾‹ 4ï¼šä»£ç ç¼–è¾‘
1. åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­è¾“å…¥ï¼š
   ```mermaid
   graph TD
       A[å¼€å§‹] --> B[å¤„ç†]
       B --> C[ç»“æŸ]
   ```
2. è‡ªåŠ¨æ¸²æŸ“å›¾è¡¨
3. åŒå‡»èŠ‚ç‚¹æ ‡ç­¾ä¿®æ”¹ä¸ºä¸­æ–‡
4. è‡ªåŠ¨åŒæ­¥åˆ°ä»£ç ç¼–è¾‘å™¨

---

## ğŸ“ 9. æŠ€æœ¯å®ç°

### æ ¸å¿ƒç±»
- `MermaidRenderer` - æ¸²æŸ“å’Œ SVG å¢å¼º
- `MermaidParser` - æºä»£ç è§£æä¸º AST
- `MermaidCodeGenerator` - AST ç”Ÿæˆæºä»£ç 
- `MermaidInteractionLayer` - äº¤äº’å¤„ç†
- `MermaidLabelEditor` - æ ‡ç­¾ç¼–è¾‘
- `MermaidNodeAdder` - èŠ‚ç‚¹æ·»åŠ 
- `MermaidNodeConnector` - èŠ‚ç‚¹è¿æ¥
- `MermaidCodeEditor` - ä»£ç ç¼–è¾‘å™¨

### æ•°æ®æµ
1. **æºä»£ç ** â†’ `MermaidParser` â†’ **AST**
2. **AST** â†’ `MermaidRenderer` â†’ **SVG**
3. **ç”¨æˆ·æ“ä½œ** â†’ **AST ä¿®æ”¹** â†’ `MermaidCodeGenerator` â†’ **æ–°æºä»£ç **
4. **æ–°æºä»£ç ** â†’ é‡æ–°æ¸²æŸ“ â†’ **æ›´æ–°åçš„ SVG**

---

## ğŸ”® 10. æœªæ¥è®¡åˆ’

### å¯èƒ½çš„åŠŸèƒ½æ‰©å±•
- [ ] æ’¤é”€/é‡åšåŠŸèƒ½
- [ ] å¤åˆ¶/ç²˜è´´èŠ‚ç‚¹å’Œè¾¹
- [ ] å¯¼å‡ºä¸ºå›¾ç‰‡
- [ ] èŠ‚ç‚¹æ‹–æ‹½ï¼ˆå¦‚æœ mermaid.js æ”¯æŒï¼‰
- [ ] æ¨¡æ¿åº“
- [ ] AI è¾…åŠ©ç”Ÿæˆ

---

**æœ€åæ›´æ–°**ï¼š2024-11-25

